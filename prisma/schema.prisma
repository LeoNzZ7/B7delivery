generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id       Int    @id @default(autoincrement())
  email    String @unique
  name     String
  password String

  User_Addresses User_Addresses?
  Bag            Bag?
  Orders         Orders[]

  @@map("users")
}

model User_Addresses {
  id            Int     @id @default(autoincrement())
  id_user       Int     @unique
  street        String
  street_number String?
  zipcode       String?
  city          String
  state         String
  complement    String?

  user User @relation(fields: [id_user], references: [id])

  @@map("users_addresses")
}

model Tenant {
  id          Int    @id @default(autoincrement())
  name        String @unique
  slug        String @unique
  mainColor   String @unique
  secondColor String @unique

  bag     Bag[]
  product Product[]
  Banners Banners[]
  Orders  Orders[]

  @@map("tenants")
}

model Product {
  id          Int     @id @default(autoincrement())
  id_tenant   Int
  name        String
  image       String
  category    String
  quantity    Int
  price       Float
  description String?

  tenant Tenant @relation(fields: [id_tenant], references: [id])
  Bag    Bag[]

  @@map("Products")
}

model Bag {
  id          Int    @id @default(autoincrement())
  id_products Int
  id_user     Int    @unique
  id_tenant   Int
  delivery    Int

  user    User    @relation(fields: [id_user], references: [id])
  tenant  Tenant  @relation(fields: [id_tenant], references: [id])
  Product Product @relation(fields: [id_products], references: [id])

  @@map("bags")
}

model Orders {
  id          Int    @id @default(autoincrement())
  id_user     Int    @unique
  id_tenant   Int
  id_products Int
  subtotal    Int
  status      String
  total       Int

  Tenant Tenant @relation(fields: [id_tenant], references: [id])
  user   User   @relation(fields: [id_user], references: [id])
}

model Banners {
  id        Int    @id @default(autoincrement())
  id_tenant Int
  image     String

  tenant Tenant @relation(fields: [id_tenant], references: [id])

  @@map("banners")
}
